ORG	00H
MOV	SP,#70H
MOV	PSW,#00H

RS	EQU P2.0
RW	EQU P2.1
ENBL	EQU P2.2

MOV	A,#38H
LCALL	COMMAND
LCALL	DELAY

MOV	A,#0EH
LCALL	COMMAND
LCALL	DELAY

MOV	A,#01H
LCALL	COMMAND
LCALL	DELAY


MOV	A,#06H
LCALL	COMMAND
LCALL	DELAY


MOV	A,#80H
LCALL	COMMAND
LCALL	DELAY
ACALL	DELAY

MOV 	DPTR,#MSG_1

LOOP_1:	CLR A
	MOVC A,@A+DPTR
	JZ FINISH_1
	LCALL DISPLAY
	LCALL DELAY
	INC DPTR
	LJMP LOOP_1

FINISH_1:MOV A,#0C0H
	 ACALL COMMAND
	 ACALL DELAY
	 MOV DPTR,#MSG_2

LOOP_2:	CLR A
	MOVC A,@A+DPTR
	JZ FINISH_2
	LCALL DISPLAY
	LCALL DELAY
	INC DPTR
	LJMP LOOP_2

FINISH_2:SJMP $

COMMAND:LCALL READY
	MOV P1,A
	CLR RS
	CLR RW
	SETB ENBL
	LCALL DELAY
	CLR ENBL
	RET

DISPLAY:LCALL READY
	MOV P1,A
	SETB RS
	CLR RW
	SETB ENBL
	LCALL DELAY
	CLR ENBL
	RET

READY:	SETB P1.7
	CLR RS
	SETB RW

WAIT:	CLR ENBL
	ACALL DELAY
	SETB ENBL
	JB P1.7,WAIT
	RET

DELAY:	
	MOV R3,#50
	AGAIN_2:MOV R4,#255
AGAIN:  DJNZ R4,AGAIN
	DJNZ R3,AGAIN_2
	RET

MSG_1:	DB "Exp. 02",0
MSG_2:	DB "LCD Interfacing",0

	 END	
